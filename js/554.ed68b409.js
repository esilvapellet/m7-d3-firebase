"use strict";(self["webpackChunkm7_d3_firebase"]=self["webpackChunkm7_d3_firebase"]||[]).push([[554],{1554:function(e,a,s){s.r(a),s.d(a,{default:function(){return pe}});var t=s(6768);const r={class:"usersView"},l=(0,t.Lk)("header",{class:"py-3"},[(0,t.Lk)("h2",{class:"text-center text-uppercase"},"Mantenedor usuarios"),(0,t.Lk)("hr")],-1),o={class:"container"},n=(0,t.Lk)("hr",{class:"py-2"},null,-1);function i(e,a,s,i,d,m){const u=(0,t.g2)("FormComp"),c=(0,t.g2)("TableComp");return(0,t.uX)(),(0,t.CE)("div",r,[l,(0,t.Lk)("main",o,[(0,t.bF)(u),n,(0,t.bF)(c,{users:e.users},null,8,["users"])])])}var d=s(5130);const m={id:"formComp"},u={class:"row justify-content-center"},c={class:"col-12 col-md-6"},p=(0,t.Lk)("h3",{class:"py-3 text-center"},"Agregar nuevo usuario",-1),k={class:"form-floating mb-2"},b=(0,t.Lk)("label",{for:"inputName"},"Nombre",-1),L={class:"form-floating mb-2"},f=(0,t.Lk)("label",{for:"inputEmail"},"Email",-1),U={class:"input-group mb-2"},h=(0,t.Lk)("span",{class:"input-group-text"},"@",-1),v={class:"form-floating"},y=(0,t.Lk)("label",{for:"inputUsername"},"Username",-1),g=(0,t.Lk)("div",{class:"form-floating mb-2 text-end"},[(0,t.Lk)("button",{class:"btn btn-primary"},"Agregar")],-1);function C(e,a,s,r,l,o){return(0,t.uX)(),(0,t.CE)("div",m,[(0,t.Lk)("div",u,[(0,t.Lk)("div",c,[p,(0,t.Lk)("form",{onSubmit:a[3]||(a[3]=(0,d.D$)(((...e)=>o.addNewUser&&o.addNewUser(...e)),["prevent"]))},[(0,t.Lk)("div",k,[(0,t.bo)((0,t.Lk)("input",{type:"text",class:"form-control",id:"inputName","onUpdate:modelValue":a[0]||(a[0]=e=>l.formUser.name=e),required:""},null,512),[[d.Jo,l.formUser.name]]),b]),(0,t.Lk)("div",L,[(0,t.bo)((0,t.Lk)("input",{type:"text",class:"form-control",id:"inputEmail","onUpdate:modelValue":a[1]||(a[1]=e=>l.formUser.mail=e),required:""},null,512),[[d.Jo,l.formUser.mail]]),f]),(0,t.Lk)("div",U,[h,(0,t.Lk)("div",v,[(0,t.bo)((0,t.Lk)("input",{type:"text",class:"form-control",id:"inputUsername","onUpdate:modelValue":a[2]||(a[2]=e=>l.formUser.username=e),required:""},null,512),[[d.Jo,l.formUser.username]]),y])]),g],32)])])])}var x=s(782),E={name:"FormComp",props:{},data(){return{formUser:{name:"",mail:"",username:""}}},methods:{...(0,x.i0)(["addUser"]),async addNewUser(){let e={name:this.formUser.name,mail:this.formUser.mail,username:this.formUser.username};await this.addUser(e),this.formUser.name="",this.formUser.mail="",this.formUser.username="",alert("Usuario agregado correctamente.")}}},w=s(1241);const M=(0,w.A)(E,[["render",C]]);var A=M,N=s(4232);const V={class:"tableComp"},X={key:0,class:"pb-5"},_=(0,t.Lk)("div",{class:"py-3 d-flex justify-content-center"},[(0,t.Lk)("h3",{class:"text-center"},"Usuarios registrados en el sistema")],-1),F={key:0},J={class:"table table-striped text-center"},j=(0,t.Lk)("thead",null,[(0,t.Lk)("tr",null,[(0,t.Lk)("th",{scope:"col"},"#"),(0,t.Lk)("th",{scope:"col"},"Nombre"),(0,t.Lk)("th",{scope:"col"},"Email"),(0,t.Lk)("th",{scope:"col"},"Username"),(0,t.Lk)("th",{scope:"col"},"Acciones")])],-1),q={scope:"row"},D=["onClick"],T=["onClick"],H={key:1},I=(0,t.Lk)("p",{class:"text-center text-danger"},"No existen usuarios registrados.",-1),K=[I],S={key:1,class:"d-flex justify-content-center"},$=(0,t.Lk)("div",{class:"spinner-border",role:"status"},[(0,t.Lk)("span",{class:"visually-hidden"},"Cargando...")],-1),z=[$],Z={class:"modal fade",id:"updateModal","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"updateModalLabel","aria-hidden":"true"},B={class:"modal-dialog"},G={class:"modal-content"},O=(0,t.Lk)("div",{class:"modal-header"},[(0,t.Lk)("h1",{class:"modal-title fs-5",id:"updateModalLabel"},"Editar datos de usuario"),(0,t.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),P={class:"modal-body"},Q={class:"py-2"},R=(0,t.Lk)("label",{for:"",class:"form-label"},"ID:",-1),W={class:"py-2"},Y=(0,t.Lk)("label",{for:"",class:"form-label"},"Nombre:",-1),ee={class:"py-2"},ae=(0,t.Lk)("label",{for:"",class:"form-label"},"Email:",-1),se={class:"py-2"},te=(0,t.Lk)("label",{for:"",class:"form-label"},"Username:",-1),re=(0,t.Lk)("div",{class:"py-2"},[(0,t.Lk)("input",{type:"submit",value:"Actualizar usuario",class:"btn btn-success"})],-1);function le(e,a,s,r,l,o){return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.Lk)("div",V,[s.users?((0,t.uX)(),(0,t.CE)("section",X,[(0,t.Lk)("div",null,[_,s.users.length>0?((0,t.uX)(),(0,t.CE)("div",F,[(0,t.Lk)("table",J,[j,(0,t.Lk)("tbody",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(s.users,((a,s)=>((0,t.uX)(),(0,t.CE)("tr",{key:a.id},[(0,t.Lk)("th",q,(0,N.v_)(s+1),1),(0,t.Lk)("td",null,(0,N.v_)(a.name),1),(0,t.Lk)("td",null,(0,N.v_)(a.mail),1),(0,t.Lk)("td",null,(0,N.v_)(a.username),1),(0,t.Lk)("td",null,[(0,t.Lk)("button",{class:"btn btn-warning mx-2",onClick:e=>o.preUpdateUser(a.id),"data-bs-toggle":"modal","data-bs-target":"#updateModal"}," Editar ",8,D),(0,t.Lk)("button",{class:"btn btn-danger mx-2",onClick:s=>e.delUser(a.id)}," Eliminar ",8,T)])])))),128))])])])):((0,t.uX)(),(0,t.CE)("div",H,K))])])):((0,t.uX)(),(0,t.CE)("section",S,z))]),(0,t.Lk)("div",Z,[(0,t.Lk)("div",B,[(0,t.Lk)("div",G,[O,(0,t.Lk)("div",P,[(0,t.Lk)("form",{onSubmit:a[4]||(a[4]=(0,d.D$)(((...e)=>o.updateUser&&o.updateUser(...e)),["prevent"]))},[(0,t.Lk)("div",Q,[R,(0,t.bo)((0,t.Lk)("input",{type:"text",class:"form-control",name:"id","onUpdate:modelValue":a[0]||(a[0]=e=>l.editUser.id=e),disabled:""},null,512),[[d.Jo,l.editUser.id]])]),(0,t.Lk)("div",W,[Y,(0,t.bo)((0,t.Lk)("input",{type:"text",class:"form-control",name:"nombre","onUpdate:modelValue":a[1]||(a[1]=e=>l.editUser.name=e)},null,512),[[d.Jo,l.editUser.name]])]),(0,t.Lk)("div",ee,[ae,(0,t.bo)((0,t.Lk)("input",{type:"text",class:"form-control",name:"email","onUpdate:modelValue":a[2]||(a[2]=e=>l.editUser.mail=e)},null,512),[[d.Jo,l.editUser.mail]])]),(0,t.Lk)("div",se,[te,(0,t.bo)((0,t.Lk)("input",{type:"text",class:"form-control",name:"username","onUpdate:modelValue":a[3]||(a[3]=e=>l.editUser.username=e)},null,512),[[d.Jo,l.editUser.username]])]),re],32)])])])])],64)}var oe=s(7617),ne=s(5328),ie={name:"TableComp",props:{users:Array},data(){return{updateModal:"",editUser:{id:"",name:"",mail:"",username:""}}},methods:{...(0,x.i0)(["delUser"]),preUpdateUser(e){let{id:a,name:s,mail:t,username:r}=this.users.find((a=>a.id==e));this.editUser={id:a,name:s,mail:t,username:r}},async updateUser(){try{let e=(0,oe.aU)(ne.A),a=(0,oe.H9)(e,"users",this.editUser.id);await(0,oe.mZ)(a,{name:this.editUser.name,mail:this.editUser.mail,username:this.editUser.username}),alert("Usuario editado correctamente."),this.editUser={id:"",name:"",mail:"",username:""},this.updateModal.hide()}catch(e){console.log(e),alert("Error al intentar editar el usuario.")}}},async mounted(){this.updateModal=new window.bootstrap.Modal("#updateModal")}};const de=(0,w.A)(ie,[["render",le]]);var me=de,ue={name:"UsersView",components:{FormComp:A,TableComp:me},computed:{...(0,x.aH)(["users"])},methods:{...(0,x.i0)(["setUsers"])},mounted(){this.setUsers()}};const ce=(0,w.A)(ue,[["render",i]]);var pe=ce}}]);
//# sourceMappingURL=554.ed68b409.js.map